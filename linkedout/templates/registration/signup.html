{% extends "base.html" %}

{% block title %}Sign Up{% endblock %}

{% block content %}
  <div class="container mt-4" style="max-width:480px;">
    <h2>Create an account</h2>
    <form method="post">
      {% csrf_token %}
      {% for field in form %}
        <div class="mb-3" id="field-{{ field.name }}" {% if field.name == 'company' and not form.initial.is_recruiter %}style="display:none;"{% endif %}>
          {% if field.name == 'is_recruiter' %}
            <label class="form-label d-flex align-items-center" for="{{ field.id_for_label }}">{{ field.label }}
              <span style="margin-left:8px;">
                <label class="switch">
                  {{ field }}
                  <span class="slider"></span>
                </label>
              </span>
            </label>
          {% else %}
            <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
          {% endif %}
          {% if field.help_text %}
            <div class="form-text">{{ field.help_text }}</div>
          {% endif %}
          {% for error in field.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
          {% endfor %}
        </div>
      {% endfor %}
      <button class="btn btn-primary" type="submit">Sign up</button>
    </form>
  </div>
  <script>
    // show/hide company input when recruiter checkbox toggled
    (function(){
      const recruiterField = document.querySelector('[name="is_recruiter"]');
      const companyWrap = document.getElementById('field-company');
      if(!recruiterField || !companyWrap) return;
      function update() {
        if(recruiterField.checked) companyWrap.style.display = '';
        else companyWrap.style.display = 'none';
      }
      recruiterField.addEventListener('change', update);
      update();
    })();
  </script>
  <style>
    /* small blue toggle switch */
    .switch { position: relative; display: inline-block; width: 46px; height: 24px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .2s; border-radius: 24px; }
    .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .2s; border-radius: 50%; }
    input:checked + .slider { background-color: #0d6efd; }
    input:checked + .slider:before { transform: translateX(22px); }
    /* show a small check when active (using box-shadow) */
    input:checked + .slider:after { content: ''; }
  </style>
{% endblock %}
