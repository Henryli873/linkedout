{% extends 'base.html' %}

{% block title %}Find Candidates{% endblock %}

{% block extra_css %}
<style>
/* Reset and layout */
* { margin: 0; padding: 0; box-sizing: border-box; }
.container-page { max-width: 1024px; margin: 0 auto; padding: 24px 0; }

/* Search Bar */
.search-container { position: relative; margin-bottom: 24px; }
.search-icon { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; width: 20px; height: 20px; }
.search-input { width: 100%; padding: 12px 16px 12px 48px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 1rem; color: #111827; background-color: #ffffff; transition: all 0.2s; }
.search-input:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,0.1); }
.search-input::placeholder { color: #9ca3af; }

/* Candidate Listings */
.candidates-list { display: flex; flex-direction: column; gap: 16px; }
.candidate-card-link { display: block; text-decoration: none; color: inherit; }
.candidate-card { background-color: #ffffff; padding: 24px; border-radius: 8px; border: 1px solid #e5e7eb; box-shadow: 0 1px 2px 0 rgba(0,0,0,0.05); transition: box-shadow 0.2s, transform 0.2s; }
.candidate-card-link:hover .candidate-card { box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); transform: translateY(-1px); }
.candidate-name { font-size: 1.25rem; font-weight: 600; color: #111827; margin-bottom: 4px; line-height: 1.4; }
.candidate-title { font-size: 1rem; color: #374151; margin-bottom: 12px; line-height: 1.5; }
.candidate-info { font-size: 0.875rem; color: #4b5563; margin-bottom: 12px; }
.separator { margin: 0 8px; color: #d1d5db; }
.skills-container { display: flex; gap: 8px; flex-wrap: wrap; }
.skill-tag { padding: 6px 12px; background-color: #dbeafe; color: #1d4ed8; border-radius: 9999px; font-size: 0.875rem; font-weight: 500; }

@media (max-width: 768px) {
  .candidate-info { font-size: 0.8125rem; }
  .skill-tag { font-size: 0.8125rem; padding: 4px 10px; }
}
</style>
{% endblock %}

{% block content %}
<div class="container-page">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Find Candidates</h2>
    <div class="text-muted small">{{ profiles|length }} results</div>
  </div>

  <!-- Unified search bar -->
  <form method="get" action="{% url 'accounts:find_applicants' %}">
    <div class="search-container">
      <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <circle cx="11" cy="11" r="8" stroke-width="2"/>
        <path d="M21 21l-4.35-4.35" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <input type="text" name="q" class="search-input" placeholder="Search by skills, title, experience, or location..." value="{{ q }}" />
    </div>
  </form>

  {% if profiles %}
    <div class="candidates-list">
      {% for p in profiles %}
        <a href="{% url 'accounts:profile_detail' p.user.username %}" class="candidate-card-link">
          <div class="candidate-card">
            <div class="candidate-name">{{ p.user.get_full_name|default:p.user.username }}</div>
            {% if p.headline_visible and p.headline %}
              <div class="candidate-title">{{ p.headline }}</div>
            {% endif %}
            <div class="candidate-info">
              {% if p.location %}
                <span>{{ p.location }}</span>
              {% endif %}
              {% if p.experience_visible and p.experience %}
                {% if p.location %}<span class="separator">â€¢</span>{% endif %}
                <span>{{ p.experience|truncatechars:140 }}</span>
              {% endif %}
            </div>
            {% if p.skills_visible and p.skills %}
              <div class="skills-container">
                {% for s in p.skill_list|slice:':10' %}
                  <span class="skill-tag">{{ s }}</span>
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-muted">No candidates found.</p>
  {% endif %}
</div>
{% endblock %}

{% block extra_js %}{% endblock %}
